{% load static %}
<!DOCTYPE html>
<html>
    <head>
       
        <link href="{% static 'view.css' %}" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial scale=1.0"/>
        <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet'>
        <link rel="shortcut icon" href="{% static 'logo.svg' %}" type="image/svg+xml">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
        <link href="https://vjs.zencdn.net/7.8.4/video-js.css" rel="stylesheet" />
        <link href="https://unpkg.com/@videojs/themes@1/dist/sea/index.css" rel="stylesheet"/>

        <!-- If you'd like to support IE8 (for Video.js versions prior to v7) -->
        <script src="https://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>
     <title>Views</title>
     <style>
         :root {
    --accent-color1: {{ user.userprofile.accent1 }};
    --accent-color2: {{ user.userprofile.accent2 }};
    --my-gradient: linear-gradient(45deg, var(--accent-color1), var(--accent-color2));
  }
     </style>
    </head>
    <body>

        <nav class="top-navbar">
                
            <h1 class="webname">Zedway | views</h1>
        </nav> 



        <div class="main-content">
            <div class="post">

                <div class="header">
                    <a href="/accounts/{{ post.creator.userprofile.slug }}" style='text-decoration: none; color:white;'><div class="profile-info"><img class="profile-pic" src="/media/{{ post.creator.userprofile.image }}">{{ post.creator.username }}</div></a>
                    <div class="more-actions">
                        {% if post.creator == request.user %}
                            <a href="delete/"><span class="material-icons delete">delete_outline</span></a>
                        {% else %}
                            <a href="report"><span class="material-icons report">report_problem</span></a>
                        {% endif %}
                    </div>
                </div>
                <div class="post-title">{{ post.title }}</div>



                <div class="picture">
                    <video
                        id="my-video"
                        class="video-js vjs-theme-sea"
                        controls
                        preload="auto"
                        data-setup="{}"
                    >
                        <source src="/media/{{ post.file }}" type="video/mp4">
                </div>

                <form class="cta-btn" method='post' action='{% url 'posts:like-post'  %}'>
                    {% csrf_token %}
                    <input type="hidden" name="post_id" value="{{ post.id }}" />
                    {% if request.user not in post.liked.all %}
                        <button type="submit" class="material-icons like">favorite_border</button>
                    {% else %}
                        <button type="submit" class="material-icons liked">favorite</button>
                    {% endif %}
                    <span class="likes"><a href="{% url 'posts:likes' slug=post.slug %}" style='color: #6666CF'>{{ post.liked.all.count }} likes</span></a>
                    <span class="views">{{ post.comments.all.count }} views</span>
                    <a class="material-icons view" href='/posts/{{ post.slug }}' style='text-decoration: none; color: #6666CF;'>chat_bubble_outline</a>
                </form>

                <div class="post-caption">{{ post.desc  }}</div>



            </div>

            <div class="post-views">
                <h2>Views on this post</h2>

                <div class="add-view">
                    <form method="POST" action="/posts/{{ post.slug }}/">
                        {% csrf_token %}
                        <textarea placeholder="Your view..." name='body' required></textarea>
                        <button type="submit" class="material-icons send">send</button>
                    </form>

                </form>
                </div>



                <div class="views-list">
                    {% for comment in comments %}
                        <div class="view-text">
				<img src="/media/{{ comment.user.userprofile.image }}"><a href='/accounts/{{ comment.user.userprofile.slug  }}' style='color: black;'>{{ comment.user }}</a>
                            <a href="report" class="material-icons report">report_problem</a>
                        </div>
                        <p>{{ comment.body }}</p>
                        <br />
                        <hr>
                        <br />
                    {% endfor %}
                </div>
          </div>

        </div>


    
        <nav class="navbar">
            <a href="/" class="navlink">
               <span class="material-icons">dashboard</span>
              <span class="nav-text"><strong>Dashboard</strong></span>
            </a>
          
            <a href="/explore" class="navlink active">
            <span class="material-icons"> explore </span>
            <span class="nav-text"><strong> Explore </strong></span>
            </a>
          
            <a href="/search" class="navlink">
              <span class="material-icons"> search </span>
              <span class="nav-text"><strong>Search </strong></span>
            </a>
          
            <a href="/accounts/{{ user.userprofile.slug }}" class="navlink">
              <span class="material-icons"> person_pin </span>
              <span class="nav-text"><strong>Profile</strong></span>
            </a>
          </nav>

        <script src="https://vjs.zencdn.net/7.8.4/video.js"></script>
          <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
          <script type="text/javascript">
            $(document).on('click', 'nav a',  function(){
                $(this).addClass('active').siblings().removeClass('active')
            })
           
           </script>
    
        </body>
    </html>
